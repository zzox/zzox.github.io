!function(e){function t(t){for(var s,a,h=t[0],r=t[1],l=t[2],c=0,d=[];c<h.length;c++)a=h[c],o[a]&&d.push(o[a][0]),o[a]=0;for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s]);for(u&&u(t);d.length;)d.shift()();return n.push.apply(n,l||[]),i()}function i(){for(var e,t=0;t<n.length;t++){for(var i=n[t],s=!0,h=1;h<i.length;h++){var r=i[h];0!==o[r]&&(s=!1)}s&&(n.splice(t--,1),e=a(a.s=i[0]))}return e}var s={},o={0:0},n=[];function a(t){if(s[t])return s[t].exports;var i=s[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=e,a.c=s,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)a.d(i,s,function(t){return e[t]}.bind(null,s));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var h=window.webpackJsonp=window.webpackJsonp||[],r=h.push.bind(h);h.push=t,h=h.slice();for(var l=0;l<h.length;l++)t(h[l]);var u=r;n.push([467,1]),i()}({1150:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),o=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{key:"BootScene"}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Phaser.Scene),s(t,[{key:"preload",value:function(){this.resize(),this.load.audioSprite("soundtrack","assets/audio/soundtrack.json",["assets/audio/soundtrack.mp3","assets/audio/soundtrack.ac3","assets/audio/soundtrack.m4a","assets/audio/soundtrack.ogg"],{instances:4}),this.load.audioSprite("sfx","assets/audio/rise-sfx.json",["assets/audio/rise-sfx.mp3","assets/audio/rise-sfx.ac3","assets/audio/rise-sfx.m4a","assets/audio/rise-sfx.ogg"],{instances:4}),this.load.json("stages","assets/data/stages.json"),this.load.json("animations","assets/data/animations.json"),this.load.json("dialog","assets/data/dialog.json"),this.load.json("pests","assets/data/pests.json"),this.load.json("weapons","assets/data/weapons.json"),this.load.bitmapFont("font","assets/fonts/manaspace.png","assets/fonts/manaspace.fnt")}},{key:"create",value:function(){var e=this;window.addEventListener("resize",function(){e.resize()}),this.scene.start("TitleScene")}},{key:"resize",value:function(){var e=window.innerWidth,t=window.innerHeight,i=Math.floor(e/480),s=Math.floor(t/270),o=i<s?i:s,n=document.getElementsByTagName("canvas")[0];n.style.width=480*o+"px",n.style.height=270*o+"px"}}]),t}();t.default=o},1151:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),o=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{key:"TitleScene"}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Phaser.Scene),s(t,[{key:"preload",value:function(){this.load.image("static-title","assets/menu/rise.png"),this.load.image("selector","assets/menu/selector.png")}},{key:"create",value:function(){this.add.image(240,80,"static-title"),this.add.bitmapText(210,185,"font","New Game"),this.menuPositions=1,this.menuPos=1,this.spr=this.add.sprite(195,188,"selector"),this.prevState={startKey:!0,upKey:!0,downKey:!0},this.startKey=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.ENTER),this.upKey=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.W),this.downKey=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.S),this.cameras.main.fadeIn(2e3),this.music=this.sound.playAudioSprite("soundtrack","intro",{loop:!0})}},{key:"update",value:function(){if(this.startKey.isDown&&!this.prevState.startKey&&1===this.menuPos)return this.pauseMusic(),void this.newGame();this.startKey.isDown&&!this.prevState.startKey&&2===this.menuPos&&this.loadGame(),this.downKey.isDown&&this.downKey.isDown!==this.prevState.downKey?this.menuPos===this.menuPositions?this.menuPos=this.menuPositions:(this.sound.playAudioSprite("soundtrack","selector",{volume:.5}),this.menuPos++):this.upKey.isDown&&this.upKey.isDown!==this.prevState.upKey&&(1===this.menuPos?this.menuPos=1:(this.sound.playAudioSprite("soundtrack","selector",{volume:.5}),this.menuPos--)),this.spr.y=20*this.menuPos+168,this.prevState={startKey:this.startKey.isDown,upKey:this.upKey.isDown,downKey:this.downKey.isDown}}},{key:"newGame",value:function(){this.clearKeys(),this.scene.start("GameScene",{stage:"desert"})}},{key:"pauseMusic",value:function(){for(var e=this.sound.sounds,t=0;t<e.length;t++)"soundtrack"===e[t].key&&this.sound.sounds[t].pause()}},{key:"clearKeys",value:function(){this.input.keyboard.removeKey(Phaser.Input.Keyboard.KeyCodes.ENTER),this.input.keyboard.removeKey(Phaser.Input.Keyboard.KeyCodes.W),this.input.keyboard.removeKey(Phaser.Input.Keyboard.KeyCodes.S)}}]),t}();t.default=o},1152:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),o=c(i(1153)),n=c(i(1154)),a=c(i(1155)),h=c(i(1156)),r=c(i(1157)),l=c(i(1158)),u=c(i(1159));function c(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e){!function(e,i){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{key:"GameScene"}));return i.sceneWidth=0,i.sceneHeight=0,i.switching=!1,i.exitSquare=!1,i.hudHeight=30,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Phaser.Scene),s(t,[{key:"preload",value:function(){var e=this;this.switching=!0,this.stage=this.scene.settings.data.stage,this.controls=this.scene.settings.data.controls,this.control={jump:"J",melee:"K",shoot:"L",bomb:"O",dash:"I",slide:"U"},this.stageConfig=this.sys.cache.json.entries.entries.stages[this.stage],this.animsConfig=this.sys.cache.json.entries.entries.animations,this.pestConfig=this.sys.cache.json.entries.entries.pests,this.weaponsConfig=this.sys.cache.json.entries.entries.weapons,this.nextStage=this.stageConfig.nextStage,this.dialogLine=0,this.dialogPos=0,this.dialogOpen=!1,this.dialogHalt=2,this.windowDimensions={x:this.sys.game.config.width,y:this.sys.game.config.height-this.hudHeight},this.animsArray=["slob","aluminumBat","bullet","selectorBounce"],this.load.image(this.stage+"-background","assets/backgrounds/"+this.stage+".png"),this.pests=this.stageConfig.pests,this.pests&&this.pests.map(function(t){e.animsArray.includes(t.name)||(e.animsArray.push(t.name),e.load.spritesheet(t.name,"assets/characters/enemies/"+t.name+".png",{frameWidth:16,frameHeight:8,spacing:2,margin:1}))}),this.bosses=this.stageConfig.bosses,this.bosses&&this.bosses.map(function(t){e.animsArray.includes(t.name)||(e.animsArray.push(t.name),e.load.spritesheet(t.name,"assets/characters/bosses/"+t.name+".png",{frameWidth:16,frameHeight:16,spacing:2,margin:1}))}),this.bigBosses=this.stageConfig.bigBosses,this.bigBosses&&this.bigBosses.map(function(t){e.animsArray.includes(t.name)||(e.animsArray.push(t.name),e.load.spritesheet(t.name,"assets/characters/bosses/"+t.name+".png",{frameWidth:48,frameHeight:48,spacing:2,margin:1}))}),this.items=this.stageConfig.items,this.items&&this.items.map(function(t){e.animsArray.includes(t.name)||(e.animsArray.push(t.name),e.load.spritesheet(t.name,"assets/weapons/"+t.name+".png",{frameWidth:t.size.x,frameHeight:t.size.y,spacing:2,margin:1}))}),this.load.spritesheet("slob","assets/characters/player/slob.png",{frameWidth:16,frameHeight:16,spacing:2,margin:1}),this.load.spritesheet(this.stage+"-tiles","assets/tilesets/"+this.stage+".png",{frameWidth:16,frameHeight:16,spacing:2,margin:1}),this.load.tilemapTiledJSON(this.stage,"assets/tilemaps/"+this.stage+".json"),this.load.spritesheet("aluminumBat","assets/weapons/aluminumBat.png",{frameWidth:16,frameHeight:16,spacing:2,margin:1}),this.load.spritesheet("bullet","assets/weapons/bullet.png",{frameWidth:8,frameHeight:8}),this.load.spritesheet("selectorBounce","assets/menu/selectorBounce.png",{frameWidth:16,frameHeight:16,spacing:2,margin:1}),this.cameraTimer=25,this.cameraTime=0,this.cameraNudge=0,this.cameraNudge=1,this.cameraDelay=1e3*this.stageConfig.cameraDelay,this.cameraIncrement=0,this.bossesNum=0,this.goingNext=!1,this.goingNextTime=1e3,this.deathTimer=2e3,this.deathTime=0,this.warn1Time=1,this.warn1Played=!1,this.warn2Time=1e3,this.warn2Played=!1,this.deathPlayed=!1,this.goingDead=!1,this.goingDeadTime=500}},{key:"create",value:function(){var e,t=this;this.add.image(240,270,this.stage+"-background").setScrollFactor(0,.1).setAlpha(.3),this.map=this.make.tilemap({key:this.stage}),this.contactTileSet=this.map.addTilesetImage(this.stage,this.stage+"-tiles"),this.contactLayer=this.map.createDynamicLayer("contactLayer",this.contactTileSet,0,0+this.hudHeight),this.contactLayer.setCollisionByProperty({collide:!0}),this.sceneWidth=this.contactLayer.width,this.sceneHeight=this.contactLayer.height,this.textGroup=[],this.stageConfig.text.map(function(e){var i=e.text.replace("jumpButton",t.control.jump).replace("meleeButton",t.control.melee).replace("shootButton",t.control.shoot).replace("bombButton",t.control.bomb).replace("slideButton",t.control.slide).replace("dashButton",t.control.dash),s=new l.default(t,e.color,i,e.position,e.scrollPosition,e.fadeTime,e.fadesOut);t.textGroup.push(s),s.create()}),this.createAnimations(),this.animsMade=!0,this.playerMaxJumps=1,this.playerMaxDashes=1,e=this.stageConfig.playerY,this.player=new o.default({scene:this,key:"player",x:40,y:e,hasGun:this.stageConfig.hasGun,HasSword:this.stageConfig.hasSword,maxJumps:this.stageConfig.maxJumps,maxDashes:this.stageConfig.maxDashes}),this.player.create(),this.player.flipX=!0,this.physics.world.addCollider(this.player,this.contactLayer),this.contactLayer||(this.contactLayer=null),this.pestGroup=this.add.group(),this.pests&&(this.pests.map(function(e){var i=e.position.split("x");t.pestGroup.add(new a.default({scene:t,key:"sprites16",x:16*Number(i[0])+8,y:16*Number(i[1]),name:e.name,details:t.pestConfig[e.name]}))}),this.physics.add.collider(this.contactLayer,this.pestGroup)),this.physics.add.overlap(this.player,this.pestGroup,this.player.hurtByEnemy),this.bossGroup=this.add.group(),this.bosses&&(this.bosses.map(function(e){t.bossesNum++,t.bossGroup.add(new h.default({scene:t,key:"opponent",x:e.position.x,y:e.position.y,name:e.name,details:e.details,flipX:!1}))}),this.physics.add.collider(this.contactLayer,this.bossGroup)),this.bigBosses&&(this.bigBosses.map(function(e){t.bossesNum++,t.pestGroup.add(new r.default({scene:t,key:"opponent",x:e.position.x,y:e.position.y,name:e.name,details:e.details,flipX:!1}))}),this.physics.add.collider(this.contactLayer,this.bossGroup)),this.itemGroup=[],this.items=this.items.map(function(e){var i=t.add.sprite(e.position.x,e.position.y);return i.play(e.name+"-idle"),{image:i,type:e.type,name:e.name,data:e.data,visible:!1}}),this.cameras.main.fadeIn(500).startFollow(this.player).setBounds(0,0,this.map.widthInPixels,this.map.heightInPixels+this.hudHeight).setBackgroundColor("#"+this.stageConfig.bgColor).stopFollow(),this.controls,this.keys={up:this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.W),left:this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.A),right:this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.D),down:this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.S),jump:this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.J),melee:this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.K),shoot:this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.L),bomb:this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.O),dash:this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.I),slide:this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.J)},this.HUD=new u.default(this),this.HUD.create(),this.switching=!1,this.scenePause=!1,this.prevState={},this.bullets=this.add.group({classType:n.default,maxSize:50,runChildUpdate:!1}),this.switching=!1,this.music=this.sound.playAudioSprite("soundtrack",this.stage,{loop:!0})}},{key:"update",value:function(e,t){var i=this;this.switching||(!this.bosses&&!this.bigBosses||0!==this.bossesNum||this.goingNext||(this.pauseMusic(),this.sound.playAudioSprite("soundtrack","win",{volume:.9}),this.cameras.main.fadeOut(1e3),this.goingNext=!0),this.goingNext&&(0<this.goingNextTime?this.goingNextTime-=t:(this.clearKeys(),this.scene.start("IntermediateScene",{nextStage:this.nextStage}))),this.player.alive||this.goingDead||(this.cameras.main.fadeOut(this.goingDeadTime),this.pauseMusic(),this.sound.playAudioSprite("soundtrack","lose",{volume:.7}),this.goingDead=!0),this.goingDead&&(0<this.goingDeadTime?this.goingDeadTime-=t:(this.clearKeys(),this.scene.start("DeathScene",{currentStage:this.stage}))),this.player.y>this.cameras.main.scrollY+270+30?this.deathTime<this.deathTimer?(this.deathTime+=t,this.deathTime>this.warn1Time&&!this.warn1Played&&(this.warn1Played=!0,this.sound.playAudioSprite("sfx","death-warn",{volume:.4})),this.deathTime>this.warn2Time&&!this.warn2Played&&(this.warn2Played=!0,this.sound.playAudioSprite("sfx","death-warn",{volume:.6}))):(this.deathPlayed||(this.deathPlayed=!0,this.sound.playAudioSprite("sfx","death",{volume:.6})),this.player.kill()):0!==this.deathTime&&(this.deathTime=0,this.warn1Played=!1,this.warn2Played=!1,this.deathPlayed=!1),this.player.update(this.keys,e,t),this.pestGroup.children.entries.map(function(i){return i.update(e,t)}),this.bullets.children.entries.map(function(i){return i.update(e,t)}),this.bossGroup.children.entries.map(function(i){return i.update(e,t)}),this.items.map(function(e){if(!e.taken&&Math.abs(e.image.x-i.player.x)<10&&Math.abs(e.image.y-i.player.y)<16&&!e.taken){e.image.visible=!1,e.taken=!0;var t=i.weaponsConfig[e.name];switch(e.type){case"ammo":i.player.ammo+=i.player.ammoInc,i.sound.playAudioSprite("sfx","bullet-pickup",{volume:.8});break;case"gun":i.player.hasGun=!0,i.player.gun.name=e.name,i.player.ammoInc=t.ammoInc,i.player.firePerSec=t.firePerSec,i.player.projFrequency=1e3/i.player.firePerSec,i.sound.playAudioSprite("sfx","gun-pickup",{volume:.8});break;case"melee":i.player.hasMelee=!0,i.player.meleeWeapon.name=e.name,i.player.meleeWeapon.damage=t.damage,i.player.meleeWeapon.blowback=t.blowback,i.player.meleeWeapon.swingStart=t.swingStart,i.player.meleeWeapon.swingLow=t.swingLow,i.player.meleeWeapon.swingHigh=t.swingHigh,i.sound.playAudioSprite("sfx","sword-pickup",{volume:.8})}}}),this.HUD.update(),this.textGroup.map(function(e){return e.update(t,i.cameras.main.scrollY)}),0===this.cameraDelay?(this.cameraTime+=t,this.cameraTime>this.cameraTimer&&(this.cameras.main.worldView.x,this.cameras.main.scrollY-=this.cameraNudge,this.cameraIncrement++,this.cameraTime=0)):(this.cameraDelay-=t,this.cameraDelay<0&&(this.cameraDelay=0)))}},{key:"createAnimations",value:function(){var e=this;this.anims.anims&&this.anims.anims.clear(),this.animsArray.map(function(t){var i=e.animsConfig[t].sheet;e.animsConfig[t].anims.map(function(t){e.anims.create({key:t.key,frames:e.anims.generateFrameNumbers(i,t.frames),frameRate:t.frameRate?t.frameRate:1,repeat:t.repeat?t.repeat:-1,repeatDelay:t.repeatDelay?t.repeatDelay:0})})})}},{key:"pauseMusic",value:function(){for(var e=this.sound.sounds,t=0;t<e.length;t++)"soundtrack"===e[t].key&&this.sound.sounds[t].pause()}},{key:"clearKeys",value:function(){this.input.keyboard.removeKey(Phaser.Input.Keyboard.KeyCodes.W),this.input.keyboard.removeKey(Phaser.Input.Keyboard.KeyCodes.A),this.input.keyboard.removeKey(Phaser.Input.Keyboard.KeyCodes.D),this.input.keyboard.removeKey(Phaser.Input.Keyboard.KeyCodes.S),this.input.keyboard.removeKey(Phaser.Input.Keyboard.KeyCodes.J),this.input.keyboard.removeKey(Phaser.Input.Keyboard.KeyCodes.K),this.input.keyboard.removeKey(Phaser.Input.Keyboard.KeyCodes.L),this.input.keyboard.removeKey(Phaser.Input.Keyboard.KeyCodes.O),this.input.keyboard.removeKey(Phaser.Input.Keyboard.KeyCodes.I),this.input.keyboard.removeKey(Phaser.Input.Keyboard.KeyCodes.U)}}]),t}();t.default=d},1153:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),o=a(i(465)),n=a(i(466));function a(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(e){!function(e,i){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.scene,e.x,e.y,e.key,e.hasGun,e.hasSword,e.maxJumps,e.maxDashes));return e.scene.physics.world.enable(i),e.scene.add.existing(i),i.animation="stand",i.hasSword=e.hasSword,i.hasGun=e.hasGun,i.maxJumps=e.maxJumps,i.maxDashes=e.maxDashes,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Phaser.GameObjects.Sprite),s(t,[{key:"create",value:function(){this.body.maxVelocity.x=150,this.body.maxVelocity.y=300,this.acceleration=800,this.jumping=!1,this.jumpTimer=120,this.jumpHold=!1,this.falling=!1,this.jumpVelocity=200,this.wallJumpVelocity=100,this.health=100,this.body.offset.set(14,8),this.body.setSize(10,16),this.anims.play("stand"),this.exitDoorTime=0,this.clearKeyTime=0,this.alive=!0,this.weapon="aluminumBat";var e=this.scene.weaponsConfig[this.weapon];this.hasMelee=!1,this.meleeWeapon=new o.default({scene:this.scene,key:"melee",name:"",swingStart:e.swingStart,swingLow:e.swingLow,swingHigh:e.swingHigh,damage:e.damage,blowback:e.blowback}),this.canDash=!0,this.dashing=!1,this.dashWarming=!1,this.dashTime=0,this.dashTimer=250,this.dashVeloctiy=500,this.maxVelocityTimer=0,this.dashes=0,this.hurt=!1,this.hurtTimer=500,this.hurtTime=0,this.tintStep=0,this.hasGun=!1,this.ammoInc=3,this.ammo=0,this.firePerSec=1,this.lastFired=0,this.projFrequency=1e3/this.firePerSec,this.shooting=!1,this.gun=new n.default({scene:this.scene,key:"gun",name:"",player:this,from:"player"}),this.prevState={},this.wallSlow=50,this.healthIncTime=2e3,this.healthIncTimer=0}},{key:"update",value:function(e,t,i){if(this.scene){if(!this.alive)return this.body.setVelocity(0),this.body.setAcceleration(0),this.anims.play("stand"),void(0!==this.tint&&(this.tint=0,this.body.allowGravity=!1));if(100!==this.health&&!this.hurt)if(this.healthIncTimer<this.healthIncTime){var s=1;0===this.body.velocity.x&&0===this.body.velocity.y&&(s=3),this.healthIncTimer+=i*s}else this.health++,this.healthIncTimer=0;var o={left:e.left.isDown,right:e.right.isDown,up:e.up.isDown,down:e.down.isDown,jump:e.jump.isDown,melee:e.melee.isDown,shoot:e.shoot.isDown,dash:e.dash.isDown},n=e.left.timeDown,a=e.right.timeDown,h=(e.up.timeDown,e.down.timeDown,e.jump.timeDown,e.melee.timeDown,e.shoot.timeDown,e.dash.timeDown,0);if(o.right&&(h=1),o.left&&(h=-1),o.left&&o.right&&(h=n<a?1:-1),(this.hurtTime<=0||250<this.hurtTime)&&(this.body.blocked.down&&!o.left&&!o.right||0<this.meleeWeapon.swingHold&&this.meleeWeapon.swingHold<this.meleeWeapon.swingHigh&&this.body.blocked.down?this.run(0):this.run(h)),0<this.jumpTimer&&this.jumping&&(this.jumpTimer-=i),this.jumpHold&&!o.jump&&(this.jumpHold=!1),0===this.body.velocity.y||this.jumping||(this.isFalling=!0,this.jumpTimer=0,this.jumps++),o.jump?(this.jump(),this.jumpHold=!0):!o.jump&&this.body.blocked.down&&(this.jumping=!1,this.jumps=0,this.isFalling=!1,this.jumpTimer=120),this.meleeWeapon.swinging&&this.prevState.flipX!==this.flipX&&this.meleeWeapon.swing(!1),!o.melee||this.prevState.melee||!this.hasMelee||this.dashing||this.dashWarming||this.meleeWeapon.swing(!0),o.melee||this.meleeWeapon.swing(!1),!o.shoot||this.prevState.shoot||!this.hasGun||!(t>this.lastFired||0===this.lastFired)||this.dashing||this.dashWarming||0<this.meleeWeapon.swingHold&&this.meleeWeapon.swingHold<this.meleeWeapon.swingHigh||this.meleeWeapon.swinging||0<this.ammo&&(this.shooting=!0,this.ammo--,this.lastFired=t+this.projFrequency),this.gun.update(this.shooting,i),(this.body.blocked.left&&!this.body.blocked.down&&o.left||this.body.blocked.right&&!this.body.blocked.down&&o.right)&&(0<this.body.velocity.y&&this.body.setVelocityY(this.wallSlow),o.jump&&!this.prevState.jump)){var r=this.body.blocked.left?1:-1;this.body.setVelocity(this.jumpVelocity*r,-1.1*this.jumpVelocity),this.scene.sound.playAudioSprite("sfx","jump",{volume:.3})}this.hurt&&(this.hurtTime>this.hurtTimer?(this.hurt=!1,this.hurtTime=0,console.log("player no longer hurt")):this.hurtTime+=i),this.hurt?(this.tintStep=5===this.tintStep?0:this.tintStep+1,this.tint=[16777215,16711680,16711680,16711680,16711680,16711680][this.tintStep]):16777215!==this.tint&&(this.tint=16777215),o.dash&&!this.prevState.dash&&this.canDash&&!this.dashWarming&&!this.dashing&&this.dashes<this.maxDashes&&(this.dashes++,this.dashWarming=!0,this.body.allowGravity=!1,this.scene.sound.playAudioSprite("sfx","dash-warm",{volume:.3})),this.dashWarming&&(this.dashTime>this.dashTimer||this.prevState.dash&&!o.dash?(this.dash(this.flipX,this.dashTime,this.dashTimer),this.scene.sound.playAudioSprite("sfx","dash",{volume:.3})):(this.body.setVelocity(0),this.dashTime+=i)),0<this.maxVelocityTimer&&(this.maxVelocityTimer-=i),this.maxVelocityTimer<=0&&(this.maxVelocityTimer=0,this.dashing=!1,150!==this.body.maxVelocity.x&&(this.body.maxVelocity.x=150,this.body.allowGravity=!0,this.body.setVelocityX(0))),0!==this.dashes&&this.body.blocked.down&&(this.dashes=0),0===this.body.velocity.x?this.animation="stand":this.animation="run",this.body.blocked.down||(this.body.velocity.y<0?this.animation="jump-up":this.animation="jump-down"),this.meleeWeapon.swingingDir&&("up"===this.meleeWeapon.swingingDir&&(this.animation="swing-up"),"down"===this.meleeWeapon.swingingDir&&(this.animation="swing-down")),(!this.meleeWeapon.swingingDir&&this.meleeWeapon.swinging||this.shooting)&&(0!==this.body.velocity.x&&(this.animation="swing-run"),0!==this.body.velocity.y&&(this.animation="swing-jump"),0===this.body.velocity.x&&0===this.body.velocity.y&&(this.animation="swing-stand")),this.dashWarming&&(this.animation="dash-warm"),this.dashing&&(this.animation="dash"),this.anims.play(this.animation,!0),this.meleeWeapon.update(t,i,this.x,this.y,this.flipX?"right":"left"),this.prevState.flipX=this.flipX,this.prevState.jump=o.jump,this.prevState.melee=o.melee,this.prevState.dash=o.dash,this.prevState.shoot=o.shoot}}},{key:"run",value:function(e){var t=this.acceleration*e;0===e?Math.abs(this.body.velocity.x)<10?(this.body.setVelocityX(0),this.body.setAccelerationX(t)):this.body.setAccelerationX((0<this.body.velocity.x?-1:1)*this.acceleration*1):(0===this.body.velocity.y&&this.body.blocked.down?this.body.setAccelerationX(t):this.body.setAccelerationX(t/2),this.meleeWeapon.swinging||this.shooting||(this.flipX=!(e<0)))}},{key:"jump",value:function(){if(this.body.blocked.down||this.jumping||!(this.jumps<this.maxJumps))return this.body.blocked.down&&!this.jumpHold?(this.body.setVelocityY(-this.jumpVelocity),this.scene.sound.playAudioSprite("sfx","jump",{volume:.3}),this.jumpTimer=120,this.jumping=!0,void this.jumps++):(this.jumping||!this.body.blocked.down)&&this.jumps<this.maxJumps&&(this.jumpTimer<=0||this.isFalling)&&!this.jumpHold?(this.body.setVelocityY(-this.jumpVelocity/1.5),this.jumpTimer=120,this.jumps++,void this.scene.sound.playAudioSprite("sfx","jump",{volume:.2})):void(this.jumpHold&&0<this.jumpTimer&&this.body.setVelocityY(-this.jumpVelocity/1.5))}},{key:"hurtByEnemy",value:function(e,t){var i=void 0,s=e.x>=t.x?1:-1;t.hurt||e.hurt||(i=t.attacking?t.attackDamage:t.stillDamage,t.alive&&(e.body.blocked.down&&0===e.body.velocity.y?(console.log("setting velocity:"+i*s*100),e.body.setVelocityX(i*s*100)):e.body.setVelocity(100*i*s,-5*i),e.damage(i),e.hurt=!0))}},{key:"dash",value:function(e,t,i){console.log("trying to dash"),this.dashTime=0,this.dashWarming=!1,e=e?1:-1,console.log(e*(t/i)*this.dashVeloctiy),this.body.maxVelocity.x=400,this.maxVelocityTimer=150,this.dashing=!0,this.body.setVelocityX(e*(t/i)*this.dashVeloctiy)}},{key:"cancelDash",value:function(){this.dashTime=0,this.dashWarming=!1,this.body.allowGravity=!0}},{key:"damage",value:function(e){this.health-=e,console.log("damagedddddddd"),this.health<=0&&this.kill(),this.scene.sound.playAudioSprite("sfx","player-hurt",{volume:.2})}},{key:"kill",value:function(){this.alive=!1}}]),t}();t.default=h},1154:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),o=function(e){function t(e){!function(e,i){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.scene.physics.world.enable(i),i.body.setSize(8,4),i.body.offset.set(12,14),i.velocity=800,i.damage=15,i.blowback=150,i.direction="left",i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Phaser.GameObjects.Sprite),s(t,[{key:"fire",value:function(e,t,i,s){this.from=s,this.body.allowGravity=!1,this.direction=i,this.setPosition(e,t),this.body.velocity.x=800*("left"===i?-1:1),this.flipX="right"===i,this.anims.play("bullet-active"),this.setActive(!0),this.setVisible(!0)}},{key:"update",value:function(e,t){this.active&&(this.scene.contactLayer&&this.scene.physics.world.collide(this,this.scene.contactLayer,this.hitGround),"player"===this.from?(this.scene.bossGroup&&this.scene.physics.world.overlap(this,this.scene.bossGroup,this.hitEnemy),this.scene.pestGroup&&this.scene.physics.world.overlap(this,this.scene.pestGroup,this.hitEnemy)):"boss"===this.from&&this.scene.physics.world.overlap(this,this.scene.player,this.hitEnemy),this.scene.physics.world.overlap(this,this.scene.enemyGroup,this.hitEnemy),0===this.body.velocity.x&&this.hitWorldBounds())}},{key:"hitWorldBounds",value:function(){this.setActive(!1),this.setVisible(!1),this.body.setVelocity(0,0),this.setPosition(-100,-100)}},{key:"hitGround",value:function(e,t){e.setActive(!1),e.setVisible(!1),e.body.setVelocity(0,0),e.setPosition(-100,-100)}},{key:"hitEnemy",value:function(e,t){!1===t.hurt&&!0===t.alive&&t.damage(e.damage),t.hurt=!0;var i=e.body.velocity.x<0?-1:1;t.body.blocked.down&&0===t.body.velocity.y?t.body.setVelocityX(e.blowback*i):t.body.setVelocity(e.blowback*i,-1*e.blowback),e.setActive(!1),e.setVisible(!1),e.body.setVelocity(0,0)}}]),t}();t.default=o},1155:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),o=function(e){function t(e){!function(e,i){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.scene,e.x,e.y-16,e.key,e.name,e.details));return e.scene.physics.world.enable(i),e.scene.add.existing(i),i.alive=!0,i.body.setVelocity(0,0).setBounce(0,0),i.body.allowGravity=!0,i.beenSeen=!1,i.player=i.scene.player,i.speed=e.details.speed,i.attackSpeed=e.details.attackSpeed,i.direction=0,i.body.setSize(16,8),i.body.offset.set(8,12),i.anims.play(e.name+"-moving"),i.health=e.details.health,i.killAt=0,i.type=e.type,i.stillDamage=e.details.stillDamage,i.attackDamage=e.details.attackDamage,i.biDirectional=e.details.biDir,i.attacking=!1,i.hurt=!1,i.hurtTimer=500,i.hurtTime=0,i.tintStep=0,i.decisionTimer=e.details.decisionTime,i.decisionTime=0,i.decision="move",i.name=e.name,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Phaser.GameObjects.Sprite),s(t,[{key:"activated",value:function(){return!!this.beenSeen||this.y+24>this.scene.cameras.main.scrollY&&(this.beenSeen=!0,this.body.allowGravity=!0)}},{key:"update",value:function(e,t){if(this.activated()){if(!this.alive)return 1e3===this.killAt&&this.body.setVelocityY(-200),this.killAt-=t,this.killAt<0&&this.destroy(),this.tintStep=5===this.tintStep?0:this.tintStep+1,void(this.tint=[16777215,16777215,16711680,16711680,16711680,16711680][this.tintStep]);if(this.hurt&&(this.hurtTime>this.hurtTimer?(this.hurt=!1,this.hurtTime=0):this.hurtTime+=t),this.hurt?(this.tintStep=5===this.tintStep?0:this.tintStep+1,this.tint=[16777215,16777215,16711680,16711680,16711680,16711680][this.tintStep]):16777215!==!this.tint&&(this.tint=16777215),(0===this.body.velocity.x&&this.body.blocked.left||this.body.blocked.right)&&(this.direction=-this.direction),this.decisionTime>this.decisionTimer){if(this.decisionTime=0,Math.abs(this.x-this.player.x)<100&&Math.abs(this.y-this.player.y)<20&&this.body.blocked.down&&.5<Math.random())this.attacking=!0,this.body.setVelocityY(-1.5*this.attackSpeed),this.x<this.player.x?this.body.setVelocityX(this.attackSpeed):this.body.setVelocityX(-this.attackSpeed);else if(this.body.blocked.down)if(.9<Math.random())this.direction=-this.direction;else if(0===this.direction){var i=.5<Math.random()?-1:1;this.direction=Math.random()*this.speed*i}else this.direction=Math.random()*this.speed}else this.decisionTime+=t;this.hurt||this.attacking||this.body.setVelocityX(this.direction),this.body.velocity.x<0?this.flipX=!1:this.flipX=!0,this.body.blocked.down&&0===this.body.velocity.y&&(this.attacking=!1),this.attacking?this.anims.play(this.name+"-attacking",!0):this.anims.play(this.name+"-moving",!0)}}},{key:"kill",value:function(){this.killAt=500,this.body.velocity.y=-500,this.flipY=!0,this.alive=!1}},{key:"damage",value:function(e){this.health=this.health-e,this.health<=0&&this.kill(),this.scene.sound.playAudioSprite("sfx","pest-hurt",{volume:.2})}}]),t}();t.default=o},1156:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),o=a(i(465)),n=a(i(466));function a(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(e){!function(e,i){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.scene,e.x,e.y,e.name,e.hasGun,e.hasSword,e.maxJumps,e.maxDashes));e.scene.physics.world.enable(i),e.scene.add.existing(i),i.beenSeen=!1,i.hasSword=e.hasSword,i.hasGun=e.hasGun,i.maxJumps=e.maxJumps,i.maxDashes=e.maxDashes,i.player=i.scene.player,i.name=e.name,i.jumps=0,i.jumping=!1,i.jumpTimer=120,i.jumpHold=!1,i.falling=!1,i.jumpVelocity=e.details.jumpVelocity,i.wallJumpVelocity=i.jumpVelocity/2,i.hasSword=e.details.hasSword,i.hasGun=e.details.hasGun,i.maxJumps=e.details.maxJumps,i.flipX=e.flipX,i.health=e.details.health,i.body.maxVelocity.x=e.details.maxVelocityX,i.body.maxVelocity.y=300,i.acceleration=800,i.body.offset.set(14,8),i.body.setSize(10,16),i.anims.play(i.name+"-stand"),i.exitDoorTime=0,i.clearKeyTime=0,i.alive=!0,i.weapon="aluminumBat";var s=i.scene.weaponsConfig[i.weapon];return i.meleeWeapon=new o.default({scene:i.scene,key:"melee",name:"aluminumBat",swingStart:s.swingStart,swingLow:s.swingLow,swingHigh:s.swingHigh,damage:s.damage,blowback:s.blowback,possession:"opponent"}),i.canDash=!0,i.dashing=!1,i.dashWarming=!1,i.dashTime=0,i.dashTimer=250,i.dashVeloctiy=500,i.maxVelocityTimer=0,i.dashes=0,i.hurt=!1,i.hurtTimer=500,i.hurtTime=0,i.tintStep=0,i.gun="pistol",i.ammoInc=3,i.ammo=50,i.firePerSec=1,i.lastFired=0,i.projFrequency=1e3/i.firePerSec,i.shooting=!1,i.decisionTimer=e.details.decisionTime,i.decisionTime=0,i.gun=new n.default({scene:i.scene,key:"gun",name:"pistol",player:i,from:"boss"}),i.state="approach",i.prevState={},i.holds={left:0,right:0,up:0,down:0,jump:0,shoot:0},i.prevState={},i.wallSlow=50,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Phaser.GameObjects.Sprite),s(t,[{key:"activated",value:function(){return!!this.beenSeen||this.player.y<this.y+8&&(this.beenSeen=!0)}},{key:"update",value:function(e,t){if(!this.alive)return this.body.setVelocity(0),this.body.setAcceleration(0),this.anims.play(this.name+"-stand"),void(0!==this.tint&&(this.tint=0,this.body.allowGravity=!1));if(this.activated()){this.y>this.scene.cameras.main.scrollY+282&&this.kill(),this.decisionTime+=t,(this.decisionTime>this.decisionTimer||this.decisionTimer<20)&&(this.decisionTime=0,this.hurt?this.state="evade":.7<Math.random()?this.state="chill":Math.abs(this.player.x-this.x)<35&&Math.abs(this.player.y-this.y)<25?this.state="attack":this.state="approach");var i={left:!1,right:!1,up:!1,down:!1,jump:!1,melee:!1,shoot:!1};switch(this.state){case"approach":this.player.x<this.x?(i.left=!0,i.right=!1,(this.body.blocked.left&&this.body.blocked.down||this.prevState.jump&&this.body.blocked.left)&&(i.jump=!0)):(i.right=!0,i.left=!1,(this.body.blocked.right&&this.body.blocked.down||this.prevState.jump&&this.body.blocked.right)&&(i.jump=!0));break;case"evade":this.player.x<this.x?(i.left=!1,i.right=!0,(this.body.blocked.right&&this.body.blocked.down||this.prevState.jump&&this.body.blocked.right)&&(i.jump=!0)):(i.right=!1,i.left=!0,(this.body.blocked.left&&this.body.blocked.down||this.prevState.jump&&this.body.blocked.left)&&(i.jump=!0));break;case"attack":this.player.x<this.x?(i.left=!0,i.right=!1):(i.left=!1,i.right=!0),i.melee=!0;break;case"chill":i.left=!1,i.right=!1,i.up=!1,i.down=!1,i.jump=!1,i.melee=!1,i.shoot=!1}for(var s in Math.abs(this.player.y-this.x)<16&&(.5<Math.random()?i.shoot=!0:i.jump=!0),333<this.holds.jump&&(i.jump=!1),50<this.holds.shoot&&(i.shoot=!1),200<this.meleeWeapon.swingHold&&(i.melee=!1),this.holds)i[s]?this.holds[s]+=t:this.holds[s]=0;var o=0;if(i.right&&(o=1),i.left&&(o=-1),i.left&&i.right&&(o=holds.right>holds.left?1:-1),(this.hurtTime<=0||250<this.hurtTime)&&(this.body.blocked.down&&!i.left&&!i.right||0<this.meleeWeapon.swingHold&&this.meleeWeapon.swingHold<this.meleeWeapon.swingHigh&&this.body.blocked.down?this.run(0):this.run(o)),0<this.jumpTimer&&this.jumping&&(this.jumpTimer-=t),this.jumpHold&&!i.jump&&(this.jumpHold=!1),0===this.body.velocity.y||this.jumping||(this.isFalling=!0,this.jumpTimer=0,this.jumps++),i.jump?(this.jump(),this.jumpHold=!0):!i.jump&&this.body.blocked.down&&(this.jumping=!1,this.jumps=0,this.isFalling=!1,this.jumpTimer=120),this.meleeWeapon.swinging&&this.prevState.flipX!==this.flipX&&this.meleeWeapon.swing(!1),i.melee&&!this.prevState.melee&&this.meleeWeapon.swing(!0),i.melee||this.meleeWeapon.swing(!1),i.shoot&&!this.prevState.shoot&&this.hasGun&&(e>this.lastFired||0===this.lastFired)&&!(0<this.meleeWeapon.swingHold&&this.meleeWeapon.swingHold<this.meleeWeapon.swingHigh||this.meleeWeapon.swinging)&&0<this.ammo&&(this.shooting=!0,this.ammo--,this.lastFired=e+this.projFrequency),this.gun.update(this.shooting,t),(this.body.blocked.left&&!this.body.blocked.down&&i.left||this.body.blocked.right&&!this.body.blocked.down&&i.right)&&(0<this.body.velocity.y&&this.body.setVelocityY(this.wallSlow),i.jump&&!this.prevState.jump)){var n=this.body.blocked.left?1:-1;this.body.setVelocity(this.jumpVelocity*n,-1.1*this.jumpVelocity)}this.hurt&&(this.hurtTime>this.hurtTimer?(this.hurt=!1,this.hurtTime=0):this.hurtTime+=t),this.hurt?(this.tintStep=5===this.tintStep?0:this.tintStep+1,this.tint=[16777215,16711680,16711680,16711680,16711680,16711680][this.tintStep]):16777215!==this.tint&&(this.tint=16777215),i.dash&&!this.prevState.dash&&this.canDash&&!this.dashWarming&&!this.dashing&&this.dashes<this.maxDashes&&(this.dashes++,this.dashWarming=!0,this.body.allowGravity=!1),this.dashWarming&&(this.dashTime>this.dashTimer||this.prevState.dash&&!i.dash?this.dash(this.flipX,this.dashTime,this.dashTimer):(this.body.setVelocity(0),this.dashTime+=t)),0<this.maxVelocityTimer&&(this.maxVelocityTimer-=t),this.maxVelocityTimer<=0&&(this.maxVelocityTimer=0,this.dashing=!1,150!==this.body.maxVelocity.x&&(this.body.maxVelocity.x=150,this.body.allowGravity=!0,this.body.setVelocityX(0))),0!==this.dashes&&this.body.blocked.down&&(this.dashes=0),0===this.body.velocity.x?this.animation="stand":this.animation="run",this.body.blocked.down||(this.animation="jump"),this.meleeWeapon.swingingDir&&("up"===this.meleeWeapon.swingingDir&&(this.animation="swing-up"),"down"===this.meleeWeapon.swingingDir&&(this.animation="swing-down")),(!this.meleeWeapon.swingingDir&&this.meleeWeapon.swinging||this.shooting)&&(0!==this.body.velocity.x&&(this.animation="swing-run"),0!==this.body.velocity.y&&(this.animation="swing-jump"),0===this.body.velocity.x&&0===this.body.velocity.y&&(this.animation="swing-stand")),this.anims.play(this.name+"-"+this.animation,!0),this.meleeWeapon.update(e,t,this.x,this.y,this.flipX?"right":"left"),this.prevState.flipX=this.flipX,this.prevState.jump=i.jump,this.prevState.melee=i.melee,this.prevState.dash=i.dash,this.prevState.shoot=i.shoot}}},{key:"run",value:function(e){var t=this.acceleration*e;0===e?Math.abs(this.body.velocity.x)<10?(this.body.setVelocityX(0),this.body.setAccelerationX(t)):this.body.setAccelerationX((0<this.body.velocity.x?-1:1)*this.acceleration*1):(0===this.body.velocity.y&&this.body.blocked.down?this.body.setAccelerationX(t):this.body.setAccelerationX(t/2),this.meleeWeapon.swinging||this.shooting||(this.flipX=!(e<0)))}},{key:"jump",value:function(){if(this.body.blocked.down||this.jumping||!(this.jumps<this.maxJumps))return this.body.blocked.down&&!this.jumpHold?(this.body.setVelocityY(-this.jumpVelocity),this.jumpTimer=120,this.jumping=!0,void this.jumps++):(this.jumping||!this.body.blocked.down)&&this.jumps<this.maxJumps&&(this.jumpTimer<=0||this.isFalling)&&!this.jumpHold?(this.body.setVelocityY(-this.jumpVelocity/1.5),this.jumpTimer=120,void this.jumps++):void(this.jumpHold&&0<this.jumpTimer&&this.body.setVelocityY(-this.jumpVelocity/1.5))}},{key:"hurtByEnemy",value:function(e,t){var i=void 0,s=e.x>=t.x?1:-1;t.hurt||e.hurt||(i=t.attacking?t.attackDamage:t.stillDamage,t.alive&&(e.body.blocked.down&&0===e.body.velocity.y?e.body.setVelocityX(i*s*100):e.body.setVelocity(100*i*s,-10*i),e.health=e.health-i,e.hurt=!0),e.health<=0&&e.die())}},{key:"dash",value:function(e,t,i){this.dashTime=0,this.dashWarming=!1,e=e?1:-1,this.body.maxVelocity.x=400,this.maxVelocityTimer=150,this.dashing=!0,this.body.setVelocityX(e*(t/i)*this.dashVeloctiy)}},{key:"cancelDash",value:function(){this.dashTime=0,this.dashWarming=!1,this.body.allowGravity=!0}},{key:"damage",value:function(e){this.health-=e,this.health<=0?this.kill():this.scene.sound.playAudioSprite("sfx","player-hurt",{volume:.2})}},{key:"kill",value:function(){this.alive&&this.scene.bossesNum--,this.alive=!1}}]),t}();t.default=h},1157:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),o=function(e){function t(e){!function(e,i){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.scene,e.x,e.y-16,e.key,e.name,e.details));return e.scene.physics.world.enable(i),e.scene.add.existing(i),i.alive=!0,i.body.setVelocity(0,0).setBounce(0,0),i.body.allowGravity=!0,i.beenSeen=!1,i.player=i.scene.player,i.speed=e.details.speed,i.attackSpeed=e.details.attackSpeed,i.direction=0,i.body.setSize(40,30),i.body.offset.set(-4,10),i.anims.play(e.name+"-moving"),i.health=e.details.health,i.killAt=0,i.type=e.type,i.stillDamage=e.details.stillDamage,i.attackDamage=e.details.attackDamage,i.biDirectional=e.details.biDir,i.attacking=!1,i.hurt=!1,i.hurtTimer=250,i.hurtTime=0,i.tintStep=0,i.decisionTimer=e.details.decisionTime,i.decisionTime=0,i.decision="move",i.name=e.name,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Phaser.GameObjects.Sprite),s(t,[{key:"activated",value:function(){return!!this.beenSeen||this.y-8>this.scene.cameras.main.scrollY&&(this.beenSeen=!0,this.body.allowGravity=!0)}},{key:"update",value:function(e,t){if(this.activated()){if(!this.alive)return this.body.setVelocity(0),this.body.setAcceleration(0),this.anims.play(this.name+"-stand"),void(0!==this.tint&&(this.tint=0,this.body.allowGravity=!1));this.hurt&&(this.hurtTime>this.hurtTimer?(this.hurt=!1,this.hurtTime=0):this.hurtTime+=t),this.hurt?(this.tintStep=5===this.tintStep?0:this.tintStep+1,this.tint=[16777215,16777215,16711680,16711680,16711680,16711680][this.tintStep]):16777215!==!this.tint&&(this.tint=16777215),(0===this.body.velocity.x&&this.body.blocked.left||this.body.blocked.right)&&(this.speed=-this.speed),this.decisionTime>this.decisionTimer?(this.decisionTime=0,Math.abs(this.x-this.player.x)<160&&-24<this.y-this.player.y&&this.body.blocked.down&&.5<Math.random()?(this.attacking=!0,this.body.setVelocityY(-1.5*this.attackSpeed),this.x<this.player.x?this.body.setVelocityX(this.attackSpeed):this.body.setVelocityX(-this.attackSpeed)):this.body.blocked.down&&.825<Math.random()&&(this.speed=-this.speed)):this.decisionTime+=t,this.hurt||this.attacking||!this.body.blocked.down||this.body.setVelocityX(this.speed),this.body.blocked.down&&0===this.body.velocity.y&&(this.attacking=!1),this.attacking?this.anims.play(this.name+"-moving-fast",!0):this.anims.play(this.name+"-moving",!0)}}},{key:"kill",value:function(){this.alive&&this.scene.bossesNum--,this.alive=!1}},{key:"damage",value:function(e){this.health=this.health-e,this.health<=0&&this.kill(),this.scene.sound.playAudioSprite("sfx","big-boss-hurt",{volume:.2})}}]),t}();t.default=o},1158:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),o=function(e,t){return parseFloat((e+("up"===t?.1:-.1)).toFixed(1))},n=function(){function e(t,i,s,o,n,a,h){!function(t,i){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.text=s,this.color=i,this.position={},this.position.x=o.x,this.position.y=o.y,this.scene=t,this.scrollPosition=n,this.alphaTimer=a,this.alphaTime=0,this.alphaStop=!0,this.alphaFadeTimer=a,this.alphaFadeTime=0,this.fadedIn=!1,this.fadesOut=h,this.canFadeOut=!1}return s(e,[{key:"create",value:function(){this.line=this.scene.add.bitmapText(this.position.x,this.position.y,"font",this.text).setTint(parseInt(this.color)).setAlpha(0)}},{key:"update",value:function(e,t){null!==this.line&&(!this.alphaStop&&!this.canFadeOut&&this.line.alpha<1&&(this.alphaTime<this.alphaTimer?this.alphaTime+=e:(this.line.setAlpha(o(this.line.alpha,"up")),this.alphaTime=0)),1===this.line.alpha&&(this.fadedIn=!0,this.canFadeOut=!0),this.fadedIn&&this.canFadeOut&&this.fadesOut&&0<this.line.alpha&&(this.alphaFadeTime<this.alphaFadeTimer?this.alphaFadeTime+=e:(this.line.setAlpha(o(this.line.alpha,"down")),this.alphaFadeTime=0)),this.scrollPosition>t&&(this.alphaStop=!1))}}]),e}();t.default=n},1159:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=t,this.playerHealth=this.scene.player.health,this.playerMelee=this.scene.player.meleeWeapon.name,this.playerGun=this.scene.player.gun.name}return s(e,[{key:"create",value:function(){var e=this;this.graphics().map(function(t){e.scene.add.graphics({fillStyle:{color:t.color}}).fillRectShape(new Phaser.Geom.Rectangle(t.x,t.y,t.width,t.height)).setScrollFactor(0,0)}),this.playerHealthText=this.scene.add.bitmapText(8,10,"font","Health:"+this.scene.player.health).setScrollFactor(0,0),this.playerAmmoText=this.scene.add.bitmapText(200,10,"font","Ammo:"+this.scene.player.ammo).setScrollFactor(0,0)}},{key:"update",value:function(){this.scene.player.health!==this.playerHealth&&(this.playerHealth=this.scene.player.health,this.playerHealthText.text="Health:"+this.playerHealth),this.scene.player.ammo!==this.playerAmmo&&(this.playerAmmo=this.scene.player.ammo,this.playerAmmoText.text="Ammo:"+this.playerAmmo)}},{key:"graphics",value:function(){return[{x:0,y:0,width:480,height:30,color:0},{x:0,y:0,width:480,height:4,color:9109643},{x:0,y:26,width:480,height:4,color:9109643},{x:0,y:0,width:4,height:30,color:9109643},{x:476,y:0,width:4,height:30,color:9109643}]}}]),e}();t.default=o},1160:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),o=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{key:"IntermediateScene"}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Phaser.Scene),s(t,[{key:"preload",value:function(){this.load.image("selector","assets/menu/selector.png")}},{key:"create",value:function(){this.nextStage=this.scene.settings.data.nextStage,"end"===this.nextStage?this.add.bitmapText(210,185,"font","Quit"):(this.add.bitmapText(210,185,"font","Next Level"),this.add.bitmapText(210,205,"font","Quit")),this.dialog=this.sys.cache.json.entries.entries.dialog[this.nextStage];for(var e=0;e<this.dialog.length;e++)this.add.bitmapText(50,20*e+50,"font",this.dialog[e]);"end"===this.nextStage?this.menuPositions=1:this.menuPositions=2,this.menuPos=1,this.spr=this.add.sprite(195,188,"selector"),this.prevState={startKey:!0,upKey:!0,downKey:!0},this.startKey=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.ENTER),this.upKey=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.W),this.downKey=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.S),this.cameras.main.fadeIn(2e3)}},{key:"update",value:function(){!this.startKey.isDown||this.prevState.startKey||1!==this.menuPos?(this.startKey.isDown&&!this.prevState.startKey&&2===this.menuPos&&this.quitGame(),this.downKey.isDown&&this.downKey.isDown!==this.prevState.downKey?this.menuPos===this.menuPositions?this.menuPos=this.menuPositions:(this.sound.playAudioSprite("soundtrack","selector",{volume:.5}),this.menuPos++):this.upKey.isDown&&this.upKey.isDown!==this.prevState.upKey&&(1===this.menuPos?this.menuPos=1:(this.sound.playAudioSprite("soundtrack","selector",{volume:.5}),this.menuPos--)),this.spr.y=20*this.menuPos+168,this.prevState={startKey:this.startKey.isDown,upKey:this.upKey.isDown,downKey:this.downKey.isDown}):"end"===this.nextStage?this.quitGame():this.nextLevel()}},{key:"nextLevel",value:function(){this.clearKeys(),this.scene.start("GameScene",{stage:this.nextStage})}},{key:"quitGame",value:function(){this.clearKeys(),this.scene.start("TitleScene")}},{key:"clearKeys",value:function(){this.input.keyboard.removeKey(Phaser.Input.Keyboard.KeyCodes.ENTER),this.input.keyboard.removeKey(Phaser.Input.Keyboard.KeyCodes.W),this.input.keyboard.removeKey(Phaser.Input.Keyboard.KeyCodes.S)}}]),t}();t.default=o},1161:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),o=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{key:"DeathScene"}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Phaser.Scene),s(t,[{key:"preload",value:function(){this.load.image("selector","assets/menu/selector.png")}},{key:"create",value:function(){this.currentStage=this.scene.settings.data.currentStage,this.add.bitmapText(214,100,"font","You Lost..."),this.add.bitmapText(210,185,"font","Restart Level"),this.add.bitmapText(210,205,"font","Quit"),this.menuPositions=2,this.menuPos=1,this.spr=this.add.sprite(195,188,"selector"),this.prevState={startKey:!0,upKey:!0,downKey:!0},this.startKey=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.ENTER),this.upKey=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.W),this.downKey=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.S),this.cameras.main.fadeIn(2e3)}},{key:"update",value:function(){!this.startKey.isDown||this.prevState.startKey||1!==this.menuPos?(this.startKey.isDown&&!this.prevState.startKey&&2===this.menuPos&&this.quitGame(),this.downKey.isDown&&this.downKey.isDown!==this.prevState.downKey?this.menuPos===this.menuPositions?this.menuPos=this.menuPositions:(this.sound.playAudioSprite("soundtrack","selector",{volume:.5}),this.menuPos++):this.upKey.isDown&&this.upKey.isDown!==this.prevState.upKey&&(1===this.menuPos?this.menuPos=1:(this.sound.playAudioSprite("soundtrack","selector",{volume:.5}),this.menuPos--)),this.spr.y=20*this.menuPos+168,this.prevState={startKey:this.startKey.isDown,upKey:this.upKey.isDown,downKey:this.downKey.isDown}):this.nextLevel()}},{key:"nextLevel",value:function(){this.clearKeys(),this.scene.start("GameScene",{stage:this.currentStage})}},{key:"quitGame",value:function(){this.clearKeys(),this.scene.start("TitleScene")}},{key:"clearKeys",value:function(){this.input.keyboard.removeKey(Phaser.Input.Keyboard.KeyCodes.ENTER),this.input.keyboard.removeKey(Phaser.Input.Keyboard.KeyCodes.W),this.input.keyboard.removeKey(Phaser.Input.Keyboard.KeyCodes.S)}}]),t}();t.default=o},465:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),o=function(e){function t(e){!function(e,i){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.scene,e.key,e.name,e.damage,e.blowback,e.swingStart,e.swingLow,e.swingHigh,e.possession));return e.scene.physics.world.enable(i),e.scene.add.existing(i),i.name=e.name,i.swinging=!1,i.body.allowGravity=!1,i.direction="left",i.swingHold=0,i.damage=e.damage,i.blowback=e.blowback,i.swingStart=e.swingStart,i.swingLow=e.swingLow,i.swingHigh=e.swingHigh,i.possession=e.possession||"player",i.swingingDir=null,i.soundPlayed=!1,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Phaser.GameObjects.Sprite),s(t,[{key:"swing",value:function(e){this.swinging&&this.swingHold<this.swingHigh?this.swinging=!0:this.swinging=e}},{key:"cancelSwing",value:function(e,t){t.canCollide&&e.swingHold>e.swingHigh&&(e.scene.sound.playAudioSprite("sfx","sword-pickup",{volume:.1}),e.swinging=!1,e.swingHold=0,e.visible=!1)}},{key:"update",value:function(e,t,i,s,o){if(this.swinging&&(this.swingHold+=t),!this.swinging&&this.swingHold>this.swingHigh)return this.visible=!1,void(this.swingHold=0);this.direction=o,this.swingHold>this.swingStart&&this.swingHold<=this.swingLow?(this.visible=!0,this.body.setSize(4,15),this.body.setOffset(14,8),"left"===this.direction?(this.x=i-4,this.flipX=!1):(this.x=i+4,this.flipX=!0),this.y=s-15,this.anims.play(this.name+"-up",!0),this.swingingDir="up","player"===this.possession?(this.scene.physics.world.overlap(this,this.scene.pestGroup,this.hurtEnemy),this.scene.physics.world.overlap(this,this.scene.bossGroup,this.hurtEnemy)):"opponent"===this.possession&&this.scene.physics.world.overlap(this,this.scene.player,this.hurtPlayer)):this.swingHold>this.swingLow&&this.swingHold<=this.swingHigh?(this.visible=!0,this.body.setSize(14,15),"left"===this.direction?(this.body.setOffset(8,8),this.x=i-14,this.flipX=!1):(this.body.setOffset(8,8),this.x=i+14,this.flipX=!0),this.y=s-2,this.anims.play(this.name+"-swing",!0),this.swingingDir="down","player"===this.possession?(this.scene.physics.world.overlap(this,this.scene.pestGroup,this.hurtEnemy),this.scene.physics.world.overlap(this,this.scene.bossGroup,this.hurtEnemy)):"opponent"===this.possession&&this.scene.physics.world.overlap(this,this.scene.player,this.hurtPlayer),this.soundPlayed||(this.soundPlayed=!0,this.scene.sound.playAudioSprite("sfx","sword-swing",{volume:.08}))):150<this.swingHold&&(this.visible=!0,this.body.setSize(15,4),this.body.setOffset(8,18),"left"===this.direction?(this.x=i-14,this.flipX=!1):(this.x=i+14,this.flipX=!0),this.y=s-2,this.anims.play(this.name+"-down",!0),this.swingingDir=null,"player"===this.possession?(this.scene.physics.world.overlap(this,this.scene.pestGroup,this.hurtEnemy),this.scene.physics.world.overlap(this,this.scene.bossGroup,this.hurtEnemy)):"opponent"===this.possession&&this.scene.physics.world.overlap(this,this.scene.player,this.hurtPlayer),this.scene.physics.world.overlap(this,this.scene.contactLayer,this.cancelSwing),this.soundPlayed&&(this.soundPlayed=!1))}},{key:"hurtEnemy",value:function(e,t){if(e.active&&e.visible){!1===t.hurt&&!0===t.alive&&t.damage(e.damage),t.hurt=!0;var i="left"===e.direction?-1:1;t.body.blocked.down&&0===t.body.velocity.y?t.body.setVelocityX(e.blowback*i):t.body.setVelocity(e.blowback*i,-1*e.blowback),e.swingingDir||e.cancelSwing(e,{canCollide:!0})}}},{key:"hurtPlayer",value:function(e,t){if(e.active&&e.visible){!1===t.hurt&&!0===t.alive&&t.damage(e.damage),t.hurt=!0;var i="left"===e.direction?-1:1;t.body.blocked.down&&0===t.body.velocity.y?t.body.setVelocityX(e.blowback*i):t.body.setVelocity(e.blowback*i,-1*e.blowback),e.swingingDir||e.cancelSwing(e,{canCollide:!0})}else alert("not active or visible")}}]),t}();t.default=o},466:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),o=function(e){function t(e){!function(e,i){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.scene,e.key,e.name,e.player,e.from));return e.scene.physics.world.enable(i),e.scene.add.existing(i),i.name=e.name,i.direction="left",i.shootTime=0,i.shootStart=50,i.shootEnd=200,i.shot=!1,i.player=e.player,i.from=e.from,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Phaser.GameObjects.Sprite),s(t,[{key:"update",value:function(e,t){if(e&&(this.shootTime+=t),this.shootTime>this.shootEnd&&(this.player.shooting=!1,this.shootTime=0,this.shot=!1),this.shootTime>this.shootStart&&this.shootTime<this.shootEnd){var i=this.player.flipX;if(this.flipX=!i,this.player.flipX?this.x=this.player.x+10:this.x=this.player.x-10,this.y=this.player.y,this.anims.play(this.name+"-shoot",!0),!this.shot){var s=this.player.flipX?this.x-8:this.x+8;this.scene.bullets.get().fire(s,this.y-1,i?"right":"left",this.from),this.scene.sound.playAudioSprite("sfx","gunshot",{volume:.6}),this.scene.sound.playAudioSprite("sfx","gunshot2",{volume:.6}),this.shot=!0}}else this.anims.isPlaying&&this.anims.stop()}}]),t}();t.default=o},467:function(e,t,i){"use strict";i(468);var s=r(i(1150)),o=r(i(1151)),n=r(i(1152)),a=r(i(1160)),h=r(i(1161));function r(e){return e&&e.__esModule?e:{default:e}}var l={type:Phaser.WEBGL,parent:"content",width:480,height:270,pixelArt:!0,roundPixels:!0,physics:{default:"arcade",arcade:{gravity:{y:800}}},scene:[s.default,o.default,a.default,n.default,h.default]};new Phaser.Game(l)}});